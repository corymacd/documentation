---
title: Deploying Redpanda for Production
---

<head>
    <meta name="title" content="Deploying Redpanda for production | Redpanda Docs"/>
    <meta name="description" content="Steps to deploy Redpanda in production."/>
</head>

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

This section describes how to set up a production cluster of Redpanda.

To try out Redpanda, see the 60-second guides for
[Linux](/docs/quickstart/quick-start-linux), [MacOS](/docs/quickstart/quick-start-macos),
[Docker](/docs/quickstart/quick-start-docker), or [Kubernetes](/docs/quickstart/kubernetes-qs-cloud).

:::note
Before you set up your Redpanda cluster, see [Managing Disk Space](/docs/deployment/disk-utilization.mdx) for guidelines on cluster creation.
:::

## Prepare infrastructure

For best performance, provision hardware according to these requirements:

- XFS for the data directory of Redpanda (`/var/lib/redpanda/data`)
- A kernel that is at least 3.10.0-514, 4.18 or newer is preferred
- Local NVMe, RAID-0 when using multiple disks
- 2GB of memory per core
- TCP ports:
  - `33145` - internal RPC port
  - `9092` - Kafka API port
  - `8082` - HTTP Proxy port
  - `8081` - Schema Registry port
  - `9644` - Prometheus and HTTP admin port

You can use [Terraform to deploy Redpanda](/docs/deployment/production-deployment-automation).

## Install Redpanda

After the hardware is provisioned, install Redpanda and configure it for production use.

You can also install Redpanda using an [Ansible playbook](/docs/deployment/production-deployment-automation).

### Install the binary

Install the binary on either Fedora/RedHat or Debian systems.

<Tabs>
  <TabItem value="fedora" label="Fedora/RedHat" default>

```bash
curl -1sLf 'https://packages.vectorized.io/nzc4ZYQK3WRGd9sy/redpanda/cfg/setup/bash.rpm.sh' | \
sudo -E bash && sudo yum install redpanda -y
```


  </TabItem>

  <TabItem value="debian" label="Debian">

```bash
curl -1sLf 'https://packages.vectorized.io/nzc4ZYQK3WRGd9sy/redpanda/cfg/setup/bash.deb.sh' | \
sudo -E bash && sudo apt install redpanda -y
```


  </TabItem>

</Tabs>


### Set Redpanda production mode

By default, Redpanda is installed in development mode, which turns off hardware optimization.

To enable hardware optimization, set Redpanda to run in production mode:

```bash
sudo rpk redpanda mode production
```

To tune the hardware, on each node:

```bash
sudo rpk redpanda tune all
```

:::note Optional: Benchmark your SSD
On taller machines, Redpanda recommends benchmarking your SSD. This can be done
with `rpk iotune`. You only need to run this once. For reference, a local NVMe SSD should yield around 1GB/s sustained writes.
`rpk iotune` captures SSD wear and tear and gives accurate measurements
of what your hardware is capable of delivering. Run this before benchmarking.

If you're on AWS, GCP, or Azure, creating a new instance and upgrading to
an image with a recent Linux kernel version is often the easiest way to
work around bad devices.

```bash
sudo rpk iotune # takes 10mins
```

:::

### Instantiate a cluster

The `minimum_initial_cluster_size` bootstrap configuration property is set to `1` by default. For production deployments, set this to `3`. This enables a simpler configuration of node IDs and seed servers.



#### Set cluster size to three

With `minimum_initial_cluster_size` set to three, clusters start with three configurable nodes, instantiating a controller Raft group with the seed servers list. The cluster grows as nodes start up. 

Redpanda automatically generates node IDs, guaranteeing that new nodes get unique node IDs. Nodes assign themselves a UUID (persisted in their kv-store), and register themselves with the controller leader, who assigns a uniue node ID. This means that you don't need to include node IDs in configuration files or worry about policies on `node_id` re-use. Redpanda initially starts up without an ID, and a node gets an ID only after it joins the cluster. All nodes can have identical `seed_servers` in their configuration files. 

:::note Notes
- The minimum number of seed servers to form a cluster is three, but you can adjust this to increase the robustness of consensus and minimize any chance that new clusters get spuriously formed after nodes are lost or restarted without any data. 
- It's important to have one of more seed servers in each fault domain (such as rack or cloud AZ). A higher number provides a stronger guarantee that clusters donâ€™t fracture unintentionally.
:::

#### Set cluster size to one

This process is more complex and is supported for backward compatibility. It requires that each node has a unique `node_id` set in its configuration file, and exactly one node has an empty `seed_servers` set in its configuration file. A single (root) node instantiates the cluster, and other nodes join it.  

You first configure and start the root node. For the root node, choose 0 as its ID. The `--self` option tells the node which interface address to bind to. Usually you want that to be its private IP.

```bash
sudo rpk config bootstrap --id 0 --self <ip> && \
sudo systemctl start redpanda-tuner redpanda
```

For every other node, you have to choose a unique integer ID for it, and let
it know where to reach the root node.

```bash
sudo rpk config bootstrap --id <unique id> \
--self <private ip>                        \
--ips <root node ip> &&                    \
sudo systemctl start redpanda-tuner redpanda
```

If clients will connect from a different subnet, see [Configuring Listeners](/docs/cluster-administration/listener-configuration).

:::note
With `minimum_initial_cluster_size` set to one, be careful not to add new nodes with the same `node_id` as decommissioned nodes. (Another node replaying its controller log may pass through historical metadata in which it thinks the `node_id` should hold topics that the new node doesn't have.)
:::

### Verify the installation

To verify that the cluster is up and running, check the logs:

```bash
journalctl -u redpanda
```

To create a topic:

```bash
rpk topic create panda
```

---

## Suggested reading

- [Working with schema registry](https://redpanda.com/blog/schema_registry/)
